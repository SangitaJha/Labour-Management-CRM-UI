<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construction CRM - Reactive Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #f4f6fa; }
        .container { max-width: 1100px; margin: 40px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px #0001; padding: 32px; }
        h2 { margin-top: 0; color: #2d3a4a; }
        .module { margin-bottom: 36px; padding: 24px; border-radius: 8px; background: #f9fafc; box-shadow: 0 1px 4px #0001; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
        th, td { padding: 8px 10px; border: 1px solid #e0e6ed; text-align: left; }
        th { background: #eaf0f6; }
        input[type="number"] { width: 80px; }
        .flex-row { display: flex; gap: 24px; align-items: center; }
        .milestone-list { margin-top: 12px; }
        .milestone-list input[type="number"] { width: 60px; }
        .summary { font-weight: bold; color: #1a7f37; }
        .result { color: #2d3a4a; font-size: 1.2em; }
        .add-btn { background: #1a7f37; color: #fff; border: none; padding: 6px 14px; border-radius: 4px; cursor: pointer; }
        .add-btn:hover { background: #145c27; }
    </style>
</head>
<body>
<div class="container">
    <h1>Construction CRM - Reactive Dashboard</h1>
    <!-- Module 1: Rate Analysis -->
    <div class="module" id="module-rate-analysis">
        <h2>1. Rate Analysis (The Engine)</h2>
        <h3>Materials</h3>
        <table id="materials-table">
            <thead>
                <tr><th>Material</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>
            </thead>
            <tbody id="materials-body"></tbody>
        </table>
        <button class="add-btn" onclick="addMaterialRow()">Add Material</button>
        <h3>Labour</h3>
        <table id="labour-table">
            <thead>
                <tr><th>Type</th><th>Qty</th><th>Wage</th><th>Amount</th></tr>
            </thead>
            <tbody id="labour-body"></tbody>
        </table>
        <button class="add-btn" onclick="addLabourRow()">Add Labour</button>
        <div class="flex-row">
            <div>
                <label>Machine Charges: ₹ <input type="number" id="machine-charges" value="0" min="0" onchange="updateAll()"></label>
            </div>
            <div class="summary">Direct Net: ₹ <span id="direct-net">0</span></div>
        </div>
        <div class="flex-row">
            <div>+ Contingencies (3%): ₹ <span id="contingencies">0</span></div>
            <div>+ Water & Electricity (1%): ₹ <span id="water-electricity">0</span></div>
            <div>+ Contractor Profit (10%): ₹ <span id="contractor-profit">0</span></div>
        </div>
        <div class="result">Final Unit Rate: ₹ <span id="final-unit-rate">0</span></div>
    </div>
    <!-- Module 2: Project Parameters -->
    <div class="module" id="module-project-params">
        <h2>2. Project Parameters (The Input)</h2>
        <label>Area (SQFT): <input type="number" id="area-sqft" value="1000" min="1" onchange="updateAll()"></label>
        <div class="result">Gross Project Total: ₹ <span id="project-total">0</span></div>
        <div class="flex-row">
            <div>- TDS (1%): ₹ <span id="tds">0</span></div>
            <div class="summary">Net Project Value: ₹ <span id="net-project-value">0</span></div>
        </div>
    </div>
    <!-- Module 3: Milestone Payouts -->
    <div class="module" id="module-milestones">
        <h2>3. Milestone Payouts (The Result)</h2>
        <table id="milestone-table">
            <thead>
                <tr><th>Stage</th><th>Percentage (%)</th><th>Amount</th></tr>
            </thead>
            <tbody id="milestone-body"></tbody>
        </table>
        <button class="add-btn" onclick="addMilestoneRow()">Add Milestone</button>
    </div>
</div>
<script src="js/dashboard-calc.js"></script>
</body>
</html>
